(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{3941:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(5417).createBrowserClient)("https://makiwfpoeomsoafwfekc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ha2l3ZnBvZW9tc29hZndmZWtjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NzU0MDUsImV4cCI6MjA4NjU1MTQwNX0.kfC7KcjGbM6uRS3007dcjJMC8yf9-zHzlgXtjbGbRGE")},6693:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var s=r(5155),a=r(2115),l=r(3941),o=r(63),i=r(5105);let d=(0,i.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),n=(0,i.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),c=["Project Info","Keywords","Competitors","Frequency","Alerts","Review"];function m(){let e=(0,o.useRouter)(),[t,r]=(0,a.useState)(1),[i,m]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),[j,v]=(0,a.useState)({name:"",websiteUrl:"",keywords:[{keyword:"",location:"United States",device:"desktop"},{keyword:"",location:"United States",device:"desktop"},{keyword:"",location:"United States",device:"desktop"}],competitors:[{url:"",name:""},{url:"",name:""},{url:"",name:""}],frequency:"weekly",alertThreshold:3}),f=(e,t)=>v(r=>({...r,[e]:t})),N=(e,t,r)=>{let s=[...j.keywords];s[e]={...s[e],[t]:r},f("keywords",s)},w=(e,t,r)=>{let s=[...j.competitors];s[e]={...s[e],[t]:r},f("competitors",s)},k=async()=>{m(!0),b("");try{let{data:{user:t}}=await l.N.auth.getUser();if(!t)throw Error("Not authenticated");let{data:r,error:s}=await l.N.from("projects").insert({user_id:t.id,name:j.name,website_url:j.websiteUrl,status:"active"}).select().single();if(s)throw s;let{error:a}=await l.N.from("project_settings").insert({project_id:r.id,monitoring_frequency:j.frequency,alert_rank_drop_threshold:j.alertThreshold,alert_on_competitor_changes:!0,alert_on_new_content_gaps:!0});if(a)throw a;let o=j.keywords.filter(e=>e.keyword.trim());if(o.length>0){let{error:e}=await l.N.from("keywords").insert(o.map(e=>({project_id:r.id,keyword:e.keyword,location:e.location,device:e.device})));if(e)throw e}let i=j.competitors.filter(e=>e.url.trim());if(i.length>0){let{error:e}=await l.N.from("competitors").insert(i.map(e=>({project_id:r.id,url:e.url,name:e.name.trim()||new URL(e.url).hostname})));if(e)throw e}e.push("/dashboard")}catch(e){var t;b(null!=(t=e.message)?t:"Failed to create project"),m(!1)}};return(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-8 pt-8 pb-5 border-b border-gray-100",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 mb-3",children:c.map((e,r)=>{let a=r+1;return(0,s.jsx)("div",{className:"flex items-center flex-1",children:(0,s.jsx)("div",{className:"w-full h-1.5 rounded-full transition-colors ".concat(a<t?"bg-indigo-500":a===t?"bg-indigo-300":"bg-gray-200")})},a)})}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Step ",t," of 6 —"," ",(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:c[t-1]})]})]}),(0,s.jsxs)("div",{className:"px-8 py-8",children:[1===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Create Project"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"Name your project and add your website."})]}),(0,s.jsx)(p,{label:"Project Name",children:(0,s.jsx)(h,{value:j.name,onChange:e=>f("name",e.target.value),placeholder:"e.g. My SEO Campaign"})}),(0,s.jsx)(p,{label:"Website URL",children:(0,s.jsx)(h,{type:"url",value:j.websiteUrl,onChange:e=>f("websiteUrl",e.target.value),placeholder:"https://example.com"})})]}),2===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Keywords"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"Add up to 3 keywords to track in search results."})]}),j.keywords.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl space-y-3",children:[(0,s.jsxs)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Keyword ",t+1]}),(0,s.jsx)(h,{value:e.keyword,onChange:e=>N(t,"keyword",e.target.value),placeholder:"e.g. best seo tools"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Location"}),(0,s.jsx)(h,{value:e.location,onChange:e=>N(t,"location",e.target.value),placeholder:"United States"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Device"}),(0,s.jsxs)("select",{value:e.device,onChange:e=>N(t,"device",e.target.value),className:x,children:[(0,s.jsx)("option",{value:"desktop",children:"Desktop"}),(0,s.jsx)("option",{value:"mobile",children:"Mobile"}),(0,s.jsx)("option",{value:"tablet",children:"Tablet"})]})]})]})]},t))]}),3===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Competitors"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"Add 3–5 competitor URLs to monitor."})]}),j.competitors.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl space-y-3",children:[(0,s.jsxs)("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Competitor ",t+1]}),(0,s.jsx)(h,{type:"url",value:e.url,onChange:e=>w(t,"url",e.target.value),placeholder:"https://competitor.com"}),(0,s.jsx)(h,{value:e.name,onChange:e=>w(t,"name",e.target.value),placeholder:"Name (optional)"})]},t))]}),4===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Monitoring Frequency"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"How often should automations run?"})]}),[{value:"weekly",label:"Weekly",desc:"Every Monday — recommended"},{value:"twice_weekly",label:"Twice Weekly",desc:"Monday & Thursday"},{value:"daily",label:"Daily",desc:"Every day — uses more API credits"}].map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-4 p-4 border rounded-xl cursor-pointer transition-colors ".concat(j.frequency===e.value?"border-indigo-400 bg-indigo-50":"border-gray-200 hover:bg-gray-50"),children:[(0,s.jsx)("input",{type:"radio",name:"freq",value:e.value,checked:j.frequency===e.value,onChange:()=>f("frequency",e.value),className:"accent-indigo-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.desc})]})]},e.value))]}),5===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Alert Settings"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"Choose when to receive notifications."})]}),(0,s.jsxs)("div",{className:"p-5 border border-gray-200 rounded-xl",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Alert if rank drops by ",(0,s.jsxs)("span",{className:"text-indigo-600 font-bold",children:[j.alertThreshold,"+"]})," positions"]}),(0,s.jsx)("input",{type:"range",min:1,max:10,value:j.alertThreshold,onChange:e=>f("alertThreshold",Number(e.target.value)),className:"w-full accent-indigo-600"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,s.jsx)("span",{children:"1 (very sensitive)"}),(0,s.jsx)("span",{children:"10 (major drops only)"})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-xl cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"accent-indigo-600 w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Alert on competitor page changes"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-xl cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",defaultChecked:!0,className:"accent-indigo-600 w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Alert when new content gaps are found"})]})]}),6===t&&(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Create"}),(0,s.jsx)("p",{className:"text-gray-500 mt-1 text-sm",children:"Everything look correct?"})]}),(0,s.jsxs)(u,{title:"Project",children:[(0,s.jsx)(y,{label:"Name",value:j.name}),(0,s.jsx)(y,{label:"Website",value:j.websiteUrl}),(0,s.jsx)(y,{label:"Frequency",value:j.frequency.replace("_"," ")}),(0,s.jsx)(y,{label:"Alert at",value:"".concat(j.alertThreshold,"+ position drop")})]}),(0,s.jsx)(u,{title:"Keywords (".concat(j.keywords.filter(e=>e.keyword).length,")"),children:j.keywords.filter(e=>e.keyword).map((e,t)=>(0,s.jsx)(y,{label:"#".concat(t+1),value:"".concat(e.keyword," \xb7 ").concat(e.location," \xb7 ").concat(e.device)},t))}),(0,s.jsx)(u,{title:"Competitors (".concat(j.competitors.filter(e=>e.url).length,")"),children:j.competitors.filter(e=>e.url).map((e,t)=>(0,s.jsx)(y,{label:e.name||"#".concat(t+1),value:e.url},t))}),g&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl text-sm text-red-700",children:g})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t border-gray-100",children:[(0,s.jsxs)("button",{onClick:()=>r(t-1),disabled:1===t,className:"flex items-center gap-2 px-5 py-2.5 border border-gray-200 rounded-lg text-sm text-gray-600 hover:bg-gray-50 disabled:opacity-40 transition-colors",children:[(0,s.jsx)(d,{size:16})," Back"]}),t<6?(0,s.jsxs)("button",{onClick:()=>r(t+1),disabled:!(1===t?j.name.trim()&&j.websiteUrl.trim():2===t?j.keywords.some(e=>e.keyword.trim()):3!==t||j.competitors.some(e=>e.url.trim())),className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700 disabled:opacity-40 transition-colors font-medium",children:["Next ",(0,s.jsx)(n,{size:16})]}):(0,s.jsx)("button",{onClick:k,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 disabled:opacity-50 transition-colors font-medium",children:i?"Creating...":"\uD83D\uDE80 Create Project"})]})]})]})}let x="w-full px-4 py-2.5 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:border-transparent";function h(e){let{...t}=e;return(0,s.jsx)("input",{...t,className:x})}function p(e){let{label:t,children:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:t}),r]})}function u(e){let{title:t,children:r}=e;return(0,s.jsxs)("div",{className:"border border-gray-200 rounded-xl overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 px-4 py-2.5 border-b border-gray-100",children:(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-700",children:t})}),(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:r})]})}function y(e){let{label:t,value:r}=e;return(0,s.jsxs)("div",{className:"flex px-4 py-2.5 text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500 w-32 shrink-0",children:t}),(0,s.jsx)("span",{className:"text-gray-900 font-medium truncate",children:r})]})}},8914:(e,t,r)=>{Promise.resolve().then(r.bind(r,6693)),Promise.resolve().then(r.t.bind(r,2619,23))}},e=>{e.O(0,[716,619,441,255,358],()=>e(e.s=8914)),_N_E=e.O()}]);